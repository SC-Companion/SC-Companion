<!-- Custom Titlebar -->
<div
  class="titlebar fixed top-0 left-0 right-0 z-[9999] h-11 bg-slate-900/90 backdrop-blur-md border-b sc-border flex items-center justify-between select-none"
  style="-webkit-app-region: drag"
>
  <!-- Left side - App title and icon -->
  <div class="flex items-center gap-3 pl-4">
    <div
      class="w-6 h-6 bg-gradient-to-r from-blue-600 to-orange-500 rounded flex items-center justify-center"
    >
      <svg
        class="w-4 h-4 text-white"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M13 10V3L4 14h7v7l9-11h-7z"
        ></path>
      </svg>
    </div>
    <span class="text-sm font-medium sc-text">SC Companion</span>
  </div>

  <!-- Center - Window title (optional, can be dynamic) -->
  <div class="flex-1 flex justify-center">
    <span class="text-xs sc-text-secondary" id="windowTitle">
      <%= typeof title !== 'undefined' ? title : 'Dashboard' %>
    </span>
  </div>

  <!-- Right side - Window controls -->
  <div class="flex items-center gap-0">
    <!-- Minimize button -->
    <button
      id="minimizeBtn"
      class="w-12 h-11 flex items-center justify-center hover:bg-slate-800 transition-colors group"
      style="-webkit-app-region: no-drag"
      title="Minimiser"
    >
      <svg
        class="w-4 h-4 sc-text-secondary group-hover:sc-text"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M20 12H4"
        ></path>
      </svg>
    </button>

    <!-- Maximize/Restore button -->
    <button
      id="maximizeBtn"
      class="w-12 h-11 flex items-center justify-center hover:bg-slate-800 transition-colors group"
      style="-webkit-app-region: no-drag"
      title="Maximiser"
    >
      <svg
        class="w-4 h-4 sc-text-secondary group-hover:sc-text"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M8 3v3a2 2 0 01-2 2H3m18 0h-3a2 2 0 01-2-2V3m0 18v-3a2 2 0 012-2h3M3 16h3a2 2 0 012 2v3"
        ></path>
      </svg>
    </button>

    <!-- Close button -->
    <button
      id="closeBtn"
      class="w-12 h-11 flex items-center justify-center hover:bg-red-600 transition-colors group"
      style="-webkit-app-region: no-drag"
      title="Fermer"
    >
      <svg
        class="w-4 h-4 sc-text-secondary group-hover:text-white"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        ></path>
      </svg>
    </button>
  </div>
</div>

<!-- Titlebar spacer to prevent content overlap -->
<div class="h-11"></div>

<script>
  // Titlebar functionality
  document.addEventListener("DOMContentLoaded", () => {
    const minimizeBtn = document.getElementById("minimizeBtn");
    const maximizeBtn = document.getElementById("maximizeBtn");
    const closeBtn = document.getElementById("closeBtn");

    // Minimize window
    if (minimizeBtn) {
      minimizeBtn.addEventListener("click", () => {
        if (window.electronAPI && window.electronAPI.minimize) {
          window.electronAPI.minimize();
        }
      });
    }

    // Maximize/Restore window
    if (maximizeBtn) {
      maximizeBtn.addEventListener("click", () => {
        if (window.electronAPI && window.electronAPI.maximize) {
          window.electronAPI.maximize();
        }
      });
    }

    // Close window
    if (closeBtn) {
      closeBtn.addEventListener("click", () => {
        if (window.electronAPI && window.electronAPI.close) {
          window.electronAPI.close();
        }
      });
    }
  });
</script>
